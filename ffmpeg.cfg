//使用hlae内嵌的ffmpeg录制
//更详细的说明见Purp1e的博客 https://purp1e.site/hlae/hlaeffmpeg.html 或 https://purple-csgo.github.io/hlae/hlaeffmpeg.html
// #. 使用之前务必阅读CFG中的注释"
// 1. 安装FFMPEG"
// 2. 把ffmpeg.cfg放入cfg文件夹"
// 4. 录制时加载ffmpeg.cfg 其它操作不变"
// 5. 如需改变设置 输入控制台给出的指令（如qp0）
// 6. 默认使用qp12预设 可修改（见28行）

//定义预设
mirv_streams settings add ffmpeg crf20 "-c:v libx264 -preset superfast -crf 20 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg crf18 "-c:v libx264 -preset superfast -crf 18 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg crf16 "-c:v libx264 -preset ultrafast -crf 16 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg qp0 "-c:v libx264 -preset ultrafast -qp 0 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg qp6 "-c:v libx264 -preset ultrafast -qp 6 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg qp12 "-c:v libx264 -preset ultrafast -qp 12 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"

//alias定义快捷指令
alias afxFfmpeg "mirv_streams settings edit afxDefault settings afxFfmpeg;echo;echo Record Setting: afxFfmpeg"
alias crf20 "mirv_streams settings edit afxDefault settings crf20;echo;echo Record Setting: SuperfastCrf20"
alias crf18 "mirv_streams settings edit afxDefault settings crf18;echo;echo Record Setting: SuperfastCrf18"
alias crf16 "mirv_streams settings edit afxDefault settings crf16;echo;echo Record Setting: UltrafastCrf16"
alias qp0 "mirv_streams settings edit afxDefault settings qp0;echo;echo Record Setting: qp0"
alias qp6 "mirv_streams settings edit afxDefault settings qp6;echo;echo Record Setting: qp6"
alias qp12 "mirv_streams settings edit afxDefault settings qp12;echo;echo Record Setting: qp12"

//设定默认录制设置（此处根据需要修改）
qp12;

//控制台输出提示
echo
echo "──────────────────────────────────────"
echo "#. 使用之前务必阅读注释"
echo "1. 安装FFMPEG"
echo "2. 把ffmpeg.cfg放入cfg文件夹"
echo "4. 录制时加载ffmpeg.cfg 其它操作不变"
echo "5. 如需改变设置 输入控制台给出的指令（如qp0）"
echo "6. 默认使用qp12预设 可修改"
echo "──────────────────────────────────────"
echo "制   作 : Purp1e "
echo "视频大小 : 1080P 300fps 下测得"
echo "录制速度 = 得到视频的时间/录制花费的时间"
echo "───────────┬───────────┬──────────────"
echo "预设指令     | 视频大小≈   | 录制速度"
echo "───────────┼───────────┼──────────────"
echo "afxFfmpeg  | 145MB/min |  1/12"
echo "crf20      | 450MB/min |  1/6"
echo "crf18      | 800MB/min |  1/6"
echo "crf16      |   2GB/min |  1/6"
echo "qp12       |   7GB/min |  1/6"
echo "qp6        |  12GB/min |  1/6"
echo "qp0        |  24GB/min |  1/6"
echo "───────────┴───────────┴──────────────"